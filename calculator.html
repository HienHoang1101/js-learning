<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üìù Todo List App - C√≥ Gi·∫£i Th√≠ch Chi Ti·∫øt</title>
    <style>
      /* --- PH·∫¶N 1: CSS (TRANG TR√ç GIAO DI·ªÜN) --- */

      /* Reset m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát */
      *,
      *::before,
      *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Trang tr√≠ body: M√†u n·ªÅn gradient t√≠m xanh */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      /* H·ªôp ch·ª©a ch√≠nh (Container) */
      .container {
        width: 100%;
        max-width: 600px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        padding: 40px;
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 32px;
        font-weight: 700;
      }

      /* Khu v·ª±c nh·∫≠p li·ªáu */
      .input-group {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
      }

      #todoInput {
        flex: 1;
        padding: 15px 20px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      #todoInput:focus {
        outline: none;
        border-color: #667eea;
      }

      #addButton {
        padding: 15px 30px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        white-space: nowrap;
      }

      #addButton:hover {
        background: #764ba2;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      /* C√°c n√∫t l·ªçc (All, Active, Completed) */
      .filters {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }

      .filter-btn {
        padding: 8px 16px;
        background: #f8f9fa;
        border: 2px solid #ddd;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s;
      }

      .filter-btn:hover {
        background: #e9ecef;
      }

      .filter-btn.active {
        background: #667eea;
        color: white;
        border-color: #667eea;
      }

      /* Danh s√°ch c√¥ng vi·ªác */
      .todo-list {
        list-style: none;
        margin-top: 20px;
      }

      .todo-item {
        display: flex;
        align-items: center;
        padding: 15px;
        margin-bottom: 10px;
        background: #f8f9fa;
        border-radius: 8px;
        transition: all 0.3s;
        border-left: 4px solid #667eea; /* Thanh m√†u b√™n tr√°i */
      }

      .todo-item:hover {
        transform: translateX(5px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      /* Style cho c√¥ng vi·ªác ƒë√£ ho√†n th√†nh */
      .todo-item.completed {
        background: #e8f5e9;
        border-left-color: #4caf50;
        text-decoration: line-through;
        color: #888;
      }

      .todo-checkbox {
        margin-right: 15px;
        width: 20px;
        height: 20px;
        cursor: pointer;
        accent-color: #4caf50;
      }

      .todo-text {
        flex: 1;
        font-size: 16px;
        color: #333;
      }

      /* N√∫t s·ª≠a v√† x√≥a */
      .todo-actions {
        display: flex;
        gap: 8px;
      }

      .todo-btn {
        padding: 8px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
      }

      .edit-btn {
        background: #2196f3;
        color: white;
      }
      .edit-btn:hover {
        background: #0b7dda;
      }

      .delete-btn {
        background: #f44336;
        color: white;
      }
      .delete-btn:hover {
        background: #e53935;
      }

      /* Th·ªëng k√™ (Stats) */
      .stats {
        display: flex;
        justify-content: space-between;
        margin-top: 25px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        font-size: 14px;
        color: #666;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #999;
        font-size: 18px;
      }

      /* Responsive cho ƒëi·ªán tho·∫°i */
      @media (max-width: 600px) {
        .container {
          padding: 20px;
        }
        .input-group {
          flex-direction: column;
        }
        #addButton {
          width: 100%;
        }
        .filters {
          flex-wrap: wrap;
        }
        .filter-btn {
          flex: 1;
          min-width: 100px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üìù Danh S√°ch Vi·ªác C·∫ßn L√†m</h1>

      <div class="input-group">
        <input
          type="text"
          id="todoInput"
          placeholder="B·∫°n ƒë·ªãnh l√†m g√¨ h√¥m nay?"
          autocomplete="off"
        />
        <button id="addButton">Th√™m</button>
      </div>

      <div class="filters">
        <button class="filter-btn active" data-filter="all">T·∫•t c·∫£</button>
        <button class="filter-btn" data-filter="active">ƒêang l√†m</button>
        <button class="filter-btn" data-filter="completed">ƒê√£ xong</button>
      </div>

      <ul id="todoList" class="todo-list"></ul>

      <div class="stats">
        <span id="totalCount">T·ªïng: 0</span>
        <span id="completedCount">ƒê√£ xong: 0</span>
        <span id="activeCount">ƒêang l√†m: 0</span>
      </div>
    </div>

    <script>
      // Class TodoApp: Qu·∫£n l√Ω to√†n b·ªô ·ª©ng d·ª•ng
      class TodoApp {
        // 1. CONSTRUCTOR: Kh·ªüi t·∫°o d·ªØ li·ªáu ban ƒë·∫ßu
        constructor() {
          this.todos = []; // M·∫£ng ch·ª©a c√°c c√¥ng vi·ªác
          this.currentFilter = "all"; // M·∫∑c ƒë·ªãnh hi·ªÉn th·ªã t·∫•t c·∫£
          this.init(); // Ch·∫°y ·ª©ng d·ª•ng
        }

        // 2. INIT: H√†m thi·∫øt l·∫≠p
        init() {
          this.loadTodos(); // L·∫•y d·ªØ li·ªáu c≈© t·ª´ b·ªô nh·ªõ
          this.render(); // V·∫Ω giao di·ªán
          this.setupEventListeners(); // B·∫Øt s·ª± ki·ªán click chu·ªôt/b√†n ph√≠m
        }

        // 3. LISTENERS: L·∫Øng nghe h√†nh ƒë·ªông ng∆∞·ªùi d√πng
        setupEventListeners() {
          // S·ª± ki·ªán click n√∫t Th√™m
          document
            .getElementById("addButton")
            .addEventListener("click", () => this.addTodo());

          // S·ª± ki·ªán nh·∫•n Enter trong √¥ nh·∫≠p li·ªáu
          document
            .getElementById("todoInput")
            .addEventListener("keypress", (e) => {
              if (e.key === "Enter") this.addTodo();
            });

          // S·ª± ki·ªán click c√°c n√∫t l·ªçc (Filter)
          document.querySelectorAll(".filter-btn").forEach((btn) => {
            btn.addEventListener("click", (e) => {
              this.setFilter(e.target.dataset.filter);
            });
          });
        }

        // 4. ADD TODO: Th√™m c√¥ng vi·ªác m·ªõi
        addTodo() {
          const input = document.getElementById("todoInput");
          const text = input.value.trim(); // L·∫•y ch·ªØ v√† x√≥a kho·∫£ng tr·∫Øng th·ª´a

          if (text === "") return; // N·∫øu r·ªóng th√¨ d·ª´ng l·∫°i

          // T·∫°o object c√¥ng vi·ªác m·ªõi
          const newTodo = {
            id: Date.now(), // ID duy nh·∫•t d·ª±a tr√™n th·ªùi gian
            text: text, // N·ªôi dung
            completed: false, // M·∫∑c ƒë·ªãnh l√† ch∆∞a xong
            createdAt: new Date(),
          };

          this.todos.push(newTodo); // Th√™m v√†o m·∫£ng
          this.saveTodos(); // L∆∞u v√†o b·ªô nh·ªõ
          input.value = ""; // X√≥a √¥ nh·∫≠p li·ªáu
          this.render(); // V·∫Ω l·∫°i giao di·ªán
        }

        // 5. DELETE TODO: X√≥a c√¥ng vi·ªác
        deleteTodo(id) {
          // Gi·ªØ l·∫°i nh·ªØng vi·ªác c√≥ ID kh√°c v·ªõi ID c·∫ßn x√≥a
          this.todos = this.todos.filter((todo) => todo.id !== id);
          this.saveTodos();
          this.render();
        }

        // 6. TOGGLE: ƒê·ªïi tr·∫°ng th√°i (Xong/Ch∆∞a xong)
        toggleCompleted(id) {
          const todo = this.todos.find((t) => t.id === id);
          if (todo) {
            todo.completed = !todo.completed; // ƒê·∫£o ng∆∞·ª£c true/false
            this.saveTodos();
            this.render();
          }
        }

        // 7. EDIT: S·ª≠a n·ªôi dung
        editTodo(id) {
          const todo = this.todos.find((t) => t.id === id);
          if (!todo) return;

          const newText = prompt("S·ª≠a n·ªôi dung c√¥ng vi·ªác:", todo.text);
          if (newText !== null && newText.trim() !== "") {
            todo.text = newText.trim();
            this.saveTodos();
            this.render();
          }
        }

        // 8. SET FILTER: X·ª≠ l√Ω b·ªô l·ªçc
        setFilter(filter) {
          this.currentFilter = filter;
          // ƒê·ªïi m√†u n√∫t ƒëang ƒë∆∞·ª£c ch·ªçn
          document.querySelectorAll(".filter-btn").forEach((btn) => {
            btn.classList.toggle("active", btn.dataset.filter === filter);
          });
          this.render(); // V·∫Ω l·∫°i theo b·ªô l·ªçc m·ªõi
        }

        // 9. FILTER DATA: L·ªçc d·ªØ li·ªáu tr∆∞·ªõc khi v·∫Ω
        getFilteredTodos() {
          switch (this.currentFilter) {
            case "active":
              return this.todos.filter((todo) => !todo.completed);
            case "completed":
              return this.todos.filter((todo) => todo.completed);
            default:
              return this.todos;
          }
        }

        // 10. RENDER: V·∫Ω giao di·ªán ra HTML (QUAN TR·ªåNG NH·∫§T)
        render() {
          const todoList = document.getElementById("todoList");
          const filteredTodos = this.getFilteredTodos();

          if (filteredTodos.length === 0) {
            // N·∫øu kh√¥ng c√≥ vi·ªác g√¨ ƒë·ªÉ hi·ªán
            todoList.innerHTML = `
                        <div class="empty-state">
                            <p>${this.todos.length === 0 ? "Ch∆∞a c√≥ c√¥ng vi·ªác n√†o! üòä" : "Kh√¥ng c√≥ vi·ªác ph√π h·ª£p b·ªô l·ªçc"}</p>
                        </div>
                    `;
          } else {
            // Bi·∫øn m·∫£ng d·ªØ li·ªáu th√†nh HTML
            todoList.innerHTML = filteredTodos
              .map(
                (todo) => `
                        <li class="todo-item ${todo.completed ? "completed" : ""}">
                            <input 
                                type="checkbox" 
                                class="todo-checkbox" 
                                ${todo.completed ? "checked" : ""}
                                onchange="todoApp.toggleCompleted(${todo.id})"
                            >
                            <span class="todo-text">${this.escapeHtml(todo.text)}</span>
                            <div class="todo-actions">
                                <button class="todo-btn edit-btn" onclick="todoApp.editTodo(${todo.id})">‚úèÔ∏è</button>
                                <button class="todo-btn delete-btn" onclick="todoApp.deleteTodo(${todo.id})">üóëÔ∏è</button>
                            </div>
                        </li>
                    `,
              )
              .join("");
          }

          this.updateStats(); // C·∫≠p nh·∫≠t s·ªë li·ªáu
        }

        // 11. STATS: T√≠nh to√°n s·ªë l∆∞·ª£ng
        updateStats() {
          const total = this.todos.length;
          const completed = this.todos.filter((t) => t.completed).length;
          const active = total - completed;

          document.getElementById("totalCount").textContent = `T·ªïng: ${total}`;
          document.getElementById("completedCount").textContent =
            `ƒê√£ xong: ${completed}`;
          document.getElementById("activeCount").textContent =
            `ƒêang l√†m: ${active}`;
        }

        // 12. STORAGE: L∆∞u v√†o tr√¨nh duy·ªát (localStorage)
        saveTodos() {
          localStorage.setItem("todos", JSON.stringify(this.todos));
        }

        loadTodos() {
          const saved = localStorage.getItem("todos");
          if (saved) {
            this.todos = JSON.parse(saved);
          }
        }

        // B·∫£o m·∫≠t: NgƒÉn ch·∫∑n m√£ ƒë·ªôc HTML
        escapeHtml(text) {
          const div = document.createElement("div");
          div.textContent = text;
          return div.innerHTML;
        }
      }

      // Kh·ªüi ƒë·ªông ·ª©ng d·ª•ng
      const todoApp = new TodoApp();
    </script>
  </body>
</html>
