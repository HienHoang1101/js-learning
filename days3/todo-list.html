<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìù Todo List App - Arrays & Objects Practice</title>
    <style>
        /* Reset CSS - X√≥a margin, padding m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát */
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box; /* T√≠nh to√°n k√≠ch th∆∞·ªõc bao g·ªìm padding v√† border */
        }

        /* Style cho body - To√†n b·ªô trang */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* M√†u n·ªÅn gradient ƒë·∫πp */
            min-height: 100vh; /* Chi·ªÅu cao t·ªëi thi·ªÉu = 100% m√†n h√¨nh */
            display: flex; /* S·ª≠ d·ª•ng Flexbox */
            justify-content: center; /* CƒÉn gi·ªØa theo chi·ªÅu ngang */
            align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
            padding: 20px;
        }

        /* Container ch√≠nh - Khung tr·∫Øng ch·ª©a todo app */
        .container {
            width: 100%;
            max-width: 600px; /* R·ªông t·ªëi ƒëa 600px */
            background: white;
            border-radius: 15px; /* Bo g√≥c */
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); /* ƒê·ªï b√≥ng */
            padding: 40px;
        }

        /* Ti√™u ƒë·ªÅ ch√≠nh */
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 32px;
            font-weight: 700;
        }

        /* Nh√≥m input v√† button th√™m todo */
        .input-group {
            display: flex; /* S·∫Øp x·∫øp ngang */
            gap: 10px; /* Kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ */
            margin-bottom: 30px;
        }

        /* √î nh·∫≠p li·ªáu */
        #todoInput {
            flex: 1; /* Chi·∫øm h·∫øt kh√¥ng gian c√≤n l·∫°i */
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s; /* Hi·ªáu ·ª©ng chuy·ªÉn m√†u vi·ªÅn */
        }

        /* Khi focus v√†o √¥ input */
        #todoInput:focus {
            outline: none; /* B·ªè vi·ªÅn m·∫∑c ƒë·ªãnh */
            border-color: #667eea; /* ƒê·ªïi m√†u vi·ªÅn sang m√†u ch·ªß ƒë·∫°o */
        }

        /* N√∫t Add Todo */
        #addButton {
            padding: 15px 30px;
            background: #667eea; /* M√†u n·ªÅn t√≠m */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer; /* Con tr·ªè chu·ªôt d·∫°ng b√†n tay */
            transition: all 0.3s; /* Hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông m∆∞·ª£t */
            white-space: nowrap; /* Kh√¥ng xu·ªëng d√≤ng */
        }

        /* Khi hover (di chu·ªôt qua) n√∫t Add */
        #addButton:hover {
            background: #764ba2; /* ƒê·ªïi m√†u n·ªÅn */
            transform: translateY(-2px); /* N√¢ng l√™n 2px */
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); /* Th√™m b√≥ng */
        }

        /* Khi click n√∫t Add */
        #addButton:active {
            transform: translateY(0); /* Tr·ªü v·ªÅ v·ªã tr√≠ ban ƒë·∫ßu */
        }

        /* Nh√≥m c√°c n√∫t filter (All, Active, Completed) */
        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center; /* CƒÉn gi·ªØa */
        }

        /* M·ªói n√∫t filter */
        .filter-btn {
            padding: 8px 16px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 20px; /* Bo g√≥c tr√≤n */
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        /* Hover n√∫t filter */
        .filter-btn:hover {
            background: #e9ecef;
        }

        /* N√∫t filter ƒëang ƒë∆∞·ª£c ch·ªçn */
        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Danh s√°ch todos */
        .todo-list {
            list-style: none; /* B·ªè d·∫•u ch·∫•m ƒë·∫ßu d√≤ng */
            margin-top: 20px;
        }

        /* M·ªói todo item */
        .todo-item {
            display: flex; /* S·∫Øp x·∫øp ngang */
            align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s;
            border-left: 4px solid #667eea; /* Vi·ªÅn tr√°i m√†u t√≠m */
        }

        /* Hover todo item */
        .todo-item:hover {
            transform: translateX(5px); /* D·ªãch sang ph·∫£i 5px */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Th√™m b√≥ng */
        }

        /* Todo ƒë√£ ho√†n th√†nh */
        .todo-item.completed {
            background: #e8f5e9; /* M√†u n·ªÅn xanh nh·∫°t */
            border-left-color: #4caf50; /* Vi·ªÅn tr√°i m√†u xanh l√° */
            text-decoration: line-through; /* G·∫°ch ngang text */
            color: #888; /* M√†u ch·ªØ x√°m */
        }

        /* Text c·ªßa todo ƒë√£ ho√†n th√†nh */
        .todo-item.completed .todo-text {
            color: #888;
        }

        /* Checkbox ƒë√°nh d·∫•u ho√†n th√†nh */
        .todo-checkbox {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #4caf50; /* M√†u checkbox khi check */
        }

        /* Text n·ªôi dung todo */
        .todo-text {
            flex: 1; /* Chi·∫øm h·∫øt kh√¥ng gian c√≤n l·∫°i */
            font-size: 16px;
            color: #333;
            transition: color 0.3s;
        }

        /* Nh√≥m c√°c n√∫t action (Edit, Delete) */
        .todo-actions {
            display: flex;
            gap: 8px;
        }

        /* N√∫t action chung */
        .todo-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        /* N√∫t Edit m√†u xanh d∆∞∆°ng */
        .edit-btn {
            background: #2196f3;
            color: white;
        }

        .edit-btn:hover {
            background: #0b7dda;
        }

        /* N√∫t Delete m√†u ƒë·ªè */
        .delete-btn {
            background: #f44336;
            color: white;
        }

        .delete-btn:hover {
            background: #e53935;
        }

        /* Ph·∫ßn th·ªëng k√™ (Total, Completed, Active) */
        .stats {
            display: flex;
            justify-content: space-between; /* CƒÉn ƒë·ªÅu 2 b√™n */
            margin-top: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 14px;
            color: #666;
        }

        /* Tr·∫°ng th√°i khi danh s√°ch r·ªóng */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
            font-size: 18px;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 15px;
            color: #ddd;
        }

        /* Responsive cho m√†n h√¨nh nh·ªè (ƒëi·ªán tho·∫°i) */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            /* Input v√† button x·∫øp d·ªçc */
            .input-group {
                flex-direction: column;
            }
            
            /* N√∫t Add chi·∫øm full width */
            #addButton {
                width: 100%;
            }
            
            /* C√°c n√∫t filter xu·ªëng d√≤ng */
            .filters {
                flex-wrap: wrap;
            }
            
            .filter-btn {
                flex: 1;
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Container ch√≠nh c·ªßa app -->
    <div class="container">
        <!-- Ti√™u ƒë·ªÅ -->
        <h1>üìù My Todo List</h1>

        <!-- Nh√≥m input th√™m todo -->
        <div class="input-group">
            <input type="text" id="todoInput" placeholder="What needs to be done?" autocomplete="off">
            <button id="addButton">Add Todo</button>
        </div>

        <!-- C√°c n√∫t filter -->
        <div class="filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="active">Active</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
        </div>

        <!-- Danh s√°ch todos (s·∫Ω ƒë∆∞·ª£c JavaScript t·∫°o ƒë·ªông) -->
        <ul id="todoList" class="todo-list">
            <!-- Todo items s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y b·∫±ng JavaScript -->
        </ul>

        <!-- Ph·∫ßn th·ªëng k√™ -->
        <div class="stats">
            <span id="totalCount">Total: 0</span>
            <span id="completedCount">Completed: 0</span>
            <span id="activeCount">Active: 0</span>
        </div>
    </div>

    <script>
        // ==========================================
        // CLASS TODOAPP - B·ªò N√ÉO C·ª¶A ·ª®NG D·ª§NG
        // ==========================================
        
        class TodoApp {
            // Constructor - H√†m kh·ªüi t·∫°o (ch·∫°y ƒë·∫ßu ti√™n khi t·∫°o object)
            constructor() {
                this.todos = [];  // M·∫£ng ch·ª©a t·∫•t c·∫£ c√¥ng vi·ªác
                this.currentFilter = 'all';  // B·ªô l·ªçc hi·ªán t·∫°i (m·∫∑c ƒë·ªãnh l√† 'all')
                this.init();  // G·ªçi h√†m kh·ªüi t·∫°o
            }

            // ==========================================
            // H√ÄM KH·ªûI T·∫†O APP
            // ==========================================
            init() {
                this.loadTodos();  // B∆∞·ªõc 1: T·∫£i d·ªØ li·ªáu t·ª´ localStorage
                this.render();  // B∆∞·ªõc 2: V·∫Ω giao di·ªán
                this.setupEventListeners();  // B∆∞·ªõc 3: G·∫Øn s·ª± ki·ªán cho c√°c n√∫t
            }

            // ==========================================
            // THI·∫æT L·∫¨P C√ÅC S·ª∞ KI·ªÜN (EVENT LISTENERS)
            // ==========================================
            setupEventListeners() {
                // S·ª± ki·ªán: Click n√∫t "Add Todo"
                document.getElementById('addButton').addEventListener('click', () => this.addTodo());
                
                // S·ª± ki·ªán: Nh·∫•n ph√≠m Enter trong √¥ input
                document.getElementById('todoInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addTodo();  // N·∫øu ph√≠m Enter ‚Üí th√™m todo
                });

                // S·ª± ki·ªán: Click c√°c n√∫t filter (All, Active, Completed)
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.setFilter(e.target.dataset.filter);  // ƒê·ªïi filter
                    });
                });
            }

            // ==========================================
            // TH√äM TODO M·ªöI
            // ==========================================
            addTodo() {
                const input = document.getElementById('todoInput');  // L·∫•y √¥ input
                const text = input.value.trim();  // L·∫•y text v√† b·ªè kho·∫£ng tr·∫Øng 2 ƒë·∫ßu

                // N·∫øu text r·ªóng ‚Üí kh√¥ng l√†m g√¨ (return = d·ª´ng h√†m)
                if (text === '') return;

                // T·∫°o object todo m·ªõi
                const newTodo = {
                    id: Date.now(),  // ID duy nh·∫•t (d√πng timestamp - s·ªë milliseconds t·ª´ 1970)
                    text: text,  // N·ªôi dung c√¥ng vi·ªác
                    completed: false,  // M·∫∑c ƒë·ªãnh ch∆∞a ho√†n th√†nh
                    createdAt: new Date()  // Th·ªùi gian t·∫°o
                };

                this.todos.push(newTodo);  // Th√™m todo m·ªõi v√†o cu·ªëi m·∫£ng
                this.saveTodos();  // L∆∞u v√†o localStorage
                input.value = '';  // X√≥a n·ªôi dung √¥ input
                this.render();  // V·∫Ω l·∫°i giao di·ªán
            }

            // ==========================================
            // X√ìA TODO
            // ==========================================
            deleteTodo(id) {
                // filter() = l·ªçc ra t·∫•t c·∫£ todo KH√îNG c√≥ id tr√πng v·ªõi id c·∫ßn x√≥a
                // V√≠ d·ª•: [1,2,3] ‚Üí x√≥a 2 ‚Üí [1,3]
                this.todos = this.todos.filter(todo => todo.id !== id);
                
                this.saveTodos();  // L∆∞u thay ƒë·ªïi
                this.render();  // V·∫Ω l·∫°i giao di·ªán
            }

            // ==========================================
            // ƒê√ÅNH D·∫§U HO√ÄN TH√ÄNH / B·ªé HO√ÄN TH√ÄNH
            // ==========================================
            toggleCompleted(id) {
                // find() = t√¨m todo c√≥ id kh·ªõp
                const todo = this.todos.find(t => t.id === id);
                
                if (todo) {
                    // ƒê·∫£o ng∆∞·ª£c gi√° tr·ªã completed
                    // false ‚Üí true (ch∆∞a xong ‚Üí xong)
                    // true ‚Üí false (xong ‚Üí ch∆∞a xong)
                    todo.completed = !todo.completed;
                    
                    this.saveTodos();  // L∆∞u thay ƒë·ªïi
                    this.render();  // V·∫Ω l·∫°i giao di·ªán
                }
            }

            // ==========================================
            // S·ª¨A TODO
            // ==========================================
            editTodo(id) {
                // T√¨m todo c·∫ßn s·ª≠a
                const todo = this.todos.find(t => t.id === id);
                if (!todo) return;  // N·∫øu kh√¥ng t√¨m th·∫•y ‚Üí d·ª´ng

                // Hi·ªÉn th·ªã h·ªôp tho·∫°i nh·∫≠p li·ªáu m·ªõi
                const newText = prompt('Edit todo:', todo.text);
                
                // N·∫øu user nh·∫≠p text m·ªõi (kh√¥ng null v√† kh√¥ng r·ªóng)
                if (newText !== null && newText.trim() !== '') {
                    todo.text = newText.trim();  // C·∫≠p nh·∫≠t text m·ªõi
                    this.saveTodos();  // L∆∞u thay ƒë·ªïi
                    this.render();  // V·∫Ω l·∫°i giao di·ªán
                }
            }

            // ==========================================
            // ƒê·∫∂T B·ªò L·ªåC (ALL / ACTIVE / COMPLETED)
            // ==========================================
            setFilter(filter) {
                this.currentFilter = filter;  // L∆∞u filter hi·ªán t·∫°i
                
                // C·∫≠p nh·∫≠t class 'active' cho n√∫t ƒë∆∞·ª£c ch·ªçn
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    // N·∫øu data-filter c·ªßa n√∫t = filter hi·ªán t·∫°i ‚Üí th√™m class 'active'
                    btn.classList.toggle('active', btn.dataset.filter === filter);
                });
                
                this.render();  // V·∫Ω l·∫°i giao di·ªán v·ªõi filter m·ªõi
            }

            // ==========================================
            // L·∫§Y DANH S√ÅCH TODO ƒê√É L·ªåC
            // ==========================================
            getFilteredTodos() {
                switch (this.currentFilter) {
                    case 'active':
                        // L·ªçc nh·ªØng todo ch∆∞a ho√†n th√†nh (completed = false)
                        return this.todos.filter(todo => !todo.completed);
                    
                    case 'completed':
                        // L·ªçc nh·ªØng todo ƒë√£ ho√†n th√†nh (completed = true)
                        return this.todos.filter(todo => todo.completed);
                    
                    default:
                        // Tr·∫£ v·ªÅ t·∫•t c·∫£ todos
                        return this.todos;
                }
            }

            // ==========================================
            // V·∫º GIAO DI·ªÜN (RENDER)
            // ==========================================
            render() {
                const todoList = document.getElementById('todoList');  // L·∫•y th·∫ª <ul>
                const filteredTodos = this.getFilteredTodos();  // L·∫•y danh s√°ch ƒë√£ l·ªçc

                // N·∫øu kh√¥ng c√≥ todo n√†o
                if (filteredTodos.length === 0) {
                    todoList.innerHTML = `
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                            </svg>
                            <p>${this.todos.length === 0 ? 'No todos yet! üòä' : 'No todos match the filter'}</p>
                        </div>
                    `;
                } else {
                    // C√≥ todo ‚Üí v·∫Ω danh s√°ch
                    // map() = bi·∫øn m·ªói todo th√†nh HTML
                    // join('') = gh√©p t·∫•t c·∫£ HTML l·∫°i th√†nh 1 chu·ªói
                    todoList.innerHTML = filteredTodos.map(todo => `
                        <li class="todo-item ${todo.completed ? 'completed' : ''}">
                            <input 
                                type="checkbox" 
                                class="todo-checkbox" 
                                ${todo.completed ? 'checked' : ''}
                                onchange="todoApp.toggleCompleted(${todo.id})"
                            >
                            <span class="todo-text">${this.escapeHtml(todo.text)}</span>
                            <div class="todo-actions">
                                <button class="todo-btn edit-btn" onclick="todoApp.editTodo(${todo.id})">‚úèÔ∏è</button>
                                <button class="todo-btn delete-btn" onclick="todoApp.deleteTodo(${todo.id})">üóëÔ∏è</button>
                            </div>
                        </li>
                    `).join('');
                }

                this.updateStats();  // C·∫≠p nh·∫≠t th·ªëng k√™
            }

            // ==========================================
            // C·∫¨P NH·∫¨T TH·ªêNG K√ä (STATS)
            // ==========================================
            updateStats() {
                const total = this.todos.length;  // T·ªïng s·ªë todo
                const completed = this.todos.filter(t => t.completed).length;  // S·ªë todo ƒë√£ xong
                const active = total - completed;  // S·ªë todo ch∆∞a xong

                // C·∫≠p nh·∫≠t n·ªôi dung text
                document.getElementById('totalCount').textContent = `Total: ${total}`;
                document.getElementById('completedCount').textContent = `Completed: ${completed}`;
                document.getElementById('activeCount').textContent = `Active: ${active}`;
            }

            // ==========================================
            // L∆ØU TODOS V√ÄO LOCALSTORAGE
            // ==========================================
            saveTodos() {
                // JSON.stringify() = chuy·ªÉn m·∫£ng JavaScript th√†nh chu·ªói JSON
                // localStorage ch·ªâ l∆∞u ƒë∆∞·ª£c d·∫°ng text n√™n ph·∫£i chuy·ªÉn ƒë·ªïi
                localStorage.setItem('todos', JSON.stringify(this.todos));
            }

            // ==========================================
            // T·∫¢I TODOS T·ª™ LOCALSTORAGE
            // ==========================================
            loadTodos() {
                const saved = localStorage.getItem('todos');  // L·∫•y d·ªØ li·ªáu ƒë√£ l∆∞u
                
                if (saved) {
                    // JSON.parse() = chuy·ªÉn chu·ªói JSON th√†nh m·∫£ng JavaScript
                    this.todos = JSON.parse(saved);
                }
            }

            // ==========================================
            // ESCAPE HTML - TR√ÅNH L·ªñI XSS (B·∫¢O M·∫¨T)
            // ==========================================
            escapeHtml(text) {
                // T·∫°o th·∫ª div t·∫°m
                const div = document.createElement('div');
                // G√°n text (tr√¨nh duy·ªát t·ª± ƒë·ªông escape c√°c k√Ω t·ª± ƒë·∫∑c bi·ªát)
                div.textContent = text;
                // L·∫•y innerHTML ƒë√£ ƒë∆∞·ª£c escape
                return div.innerHTML;
                
                // V√≠ d·ª•: "<script>alert('hack')</script>" 
                // ‚Üí "&lt;script&gt;alert('hack')&lt;/script&gt;"
                // ‚Üí Hi·ªÉn th·ªã d∆∞·ªõi d·∫°ng text thay v√¨ ch·∫°y code
            }
        }

        // ==========================================
        // KH·ªûI T·∫†O ·ª®NG D·ª§NG
        // ==========================================
        // T·∫°o object todoApp t·ª´ class TodoApp
        // Khi t·∫°o ‚Üí constructor() ch·∫°y ‚Üí init() ch·∫°y ‚Üí app ho·∫°t ƒë·ªông!
        const todoApp = new TodoApp();
    </script>
</body>
</html>